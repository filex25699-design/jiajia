<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Christmas ä½³ä½³</title>
    <style>
        /* --- å…¨å±€ä¸èƒŒæ™¯ --- */
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Arial', sans-serif;
            color: white;
        }

        #snow-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* --- éŸ³ä¹æŒ‰é’® (å³ä¸Šè§’) --- */
        .music-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            padding: 10px 18px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .music-btn:hover { background: rgba(255, 255, 255, 0.3); transform: scale(1.05); }
        .music-spin { animation: spinDisk 3s linear infinite; }
        @keyframes spinDisk { 100% { transform: rotate(360deg); } }

        /* --- ä¸»åœºæ™¯å®¹å™¨ --- */
        .scene {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 500px;
        }

        /* --- 1. åœ£è¯æ ‘ (SVGç»˜åˆ¶) --- */
        .tree-wrapper {
            position: relative;
            filter: drop-shadow(0 0 20px rgba(46, 204, 113, 0.4));
            animation: floatTree 4s ease-in-out infinite;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .tree-wrapper:hover { transform: scale(1.05); }

        /* æ ‘ä¸Šçš„æ˜Ÿæ˜ŸåŠ¨ç”» */
        .tree-star {
            transform-origin: center;
            animation: glowStar 2s infinite alternate;
        }

        /* --- 2. åº•éƒ¨äº’åŠ¨åŒº (è€äººä¸ç¤¼ç‰©) --- */
        .footer-interactive {
            display: flex;
            justify-content: space-between;
            width: 320px;
            margin-top: -40px; /* è®©å®ƒä»¬ç¨å¾®æŒ¡ä½æ ‘çš„åº•éƒ¨ä¸€ç‚¹ï¼Œæ›´æœ‰å±‚æ¬¡æ„Ÿ */
            position: relative;
            z-index: 20;
        }

        .character {
            width: 100px;
            height: 100px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.4));
        }

        .character:hover {
            transform: translateY(-10px) scale(1.1);
            filter: drop-shadow(0 15px 25px rgba(0,0,0,0.6));
        }
        
        /* åœ£è¯è€äººç‰¹æœ‰åŠ¨ç”» */
        .santa-svg { animation: hoverSanta 3s ease-in-out infinite alternate; }
        /* ç¤¼ç‰©ç‰¹æœ‰åŠ¨ç”» */
        .gift-svg { animation: hoverGift 3.5s ease-in-out infinite alternate; }

        /* --- 3. è‰ºæœ¯å­—æ ‡é¢˜ --- */
        .title-text {
            font-family: 'Brush Script MT', cursive;
            font-size: 3.5rem;
            margin-top: 40px;
            background: linear-gradient(to right, #fff, #ffd700, #fff);
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            animation: textShine 3s linear infinite;
            text-align: center;
        }

        /* --- å¼¹çª—æ ·å¼ --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 999;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        
        .letter-card {
            background: #fff;
            width: 80%;
            max-width: 350px;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.4s ease;
            border: 4px solid #c0392b;
            background-image: radial-gradient(#f3f3f3 15%, transparent 16%), radial-gradient(#f3f3f3 15%, transparent 16%);
            background-size: 20px 20px;
        }
        
        .modal-overlay.active .letter-card {
            transform: scale(1);
            opacity: 1;
        }

        .letter-card h3 { color: #c0392b; margin-top: 0; font-size: 1.5rem; }
        .letter-card p { color: #333; font-size: 1.1rem; line-height: 1.6; font-weight: bold; }
        .close-btn {
            margin-top: 20px;
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }
        .close-btn:hover { background: #2ecc71; }

        /* --- åŠ¨ç”»å…³é”®å¸§ --- */
        @keyframes floatTree { 0% { transform: translateY(0); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0); } }
        @keyframes glowStar { 0% { filter: drop-shadow(0 0 5px #ffd700); transform: scale(1); } 100% { filter: drop-shadow(0 0 20px #ffd700); transform: scale(1.1); } }
        @keyframes hoverSanta { 0% { transform: rotate(-2deg) translateY(0); } 100% { transform: rotate(2deg) translateY(-5px); } }
        @keyframes hoverGift { 0% { transform: rotate(2deg) translateY(0); } 100% { transform: rotate(-2deg) translateY(-5px); } }
        @keyframes textShine { 0% { opacity: 0.8; } 50% { opacity: 1; text-shadow: 0 0 30px #ffd700; } 100% { opacity: 0.8; } }

        /* æ‰‹æœºé€‚é… */
        @media (max-width: 600px) {
            .scene { transform: scale(0.85); }
            .title-text { font-size: 2.8rem; }
        }
    </style>
</head>
<body>

    <button class="music-btn" onclick="toggleMusic()">
        <span id="music-icon">ğŸµ</span>
        <span id="music-text">æ’­æ”¾åœ£è¯æ­Œ</span>
    </button>
    <audio id="bgm" loop>
        <source src="https://cdn.pixabay.com/audio/2022/11/22/audio_c5b367d323.mp3" type="audio/mp3">
    </audio>

    <canvas id="snow-canvas"></canvas>

    <div class="scene">
        <div class="tree-wrapper" onclick="openModal('ğŸ„', 'è¿™æ£µæ ‘ä¸Šçš„æ¯ä¸€é¢—æ˜Ÿæ˜Ÿï¼Œ<br>éƒ½æ˜¯æˆ‘è®¸ä¸‹çš„æ„¿æœ›ï¼š<br>æ„¿ä½³ä½³æ¯å¤©éƒ½å¼€å¿ƒï¼')">
            <svg width="300" height="380" viewBox="0 0 200 260" xmlns="http://www.w3.org/2000/svg">
                <rect x="90" y="220" width="20" height="40" fill="#5D4037" rx="2" />
                
                <path d="M20,230 Q100,260 180,230 L160,190 L180,190 Q100,220 20,190 L40,190 L20,230 Z" fill="#1B5E20" /> <path d="M30,220 Q100,250 170,220 Q150,160 100,140 Q50,160 30,220" fill="#2E7D32" /> <path d="M40,160 Q100,190 160,160 Q145,110 100,90 Q55,110 40,160" fill="#43A047" /> <path d="M55,100 Q100,120 145,100 Q130,60 100,30 Q70,60 55,100" fill="#66BB6A" /> <circle cx="70" cy="180" r="5" fill="#E74C3C" />
                <circle cx="140" cy="170" r="5" fill="#F1C40F" />
                <circle cx="90" cy="150" r="5" fill="#3498DB" />
                <circle cx="110" cy="200" r="6" fill="#FFFFFF" opacity="0.8" />
                <circle cx="80" cy="120" r="4" fill="#E74C3C" />
                <circle cx="120" cy="110" r="5" fill="#F1C40F" />

                <path d="M60,170 Q100,190 140,160" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="3" stroke-linecap="round" />
                <path d="M70,110 Q100,130 130,100" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="2" stroke-linecap="round" />

                <g class="tree-star">
                    <path transform="translate(100, 30) scale(0.8)" d="M0,-15 L4,-4 L15,-4 L6,3 L9,14 L0,8 L-9,14 L-6,3 L-15,-4 L-4,-4 Z" fill="#FFD700" stroke="#F39C12" stroke-width="1"/>
                </g>
            </svg>
        </div>

        <div class="footer-interactive">
            
            <div class="character santa-svg" onclick="openModal('ğŸ…', 'ä½³ä½³ï¼Œåœ£è¯å¿«ä¹ï¼<br>ä¸ç®¡å¤–é¢å¤©æ°”å¤šå†·ï¼Œ<br>æˆ‘éƒ½åœ¨ä½ èº«åç»™ä½ æ¸©æš–ã€‚')">
                <svg width="100" height="100" viewBox="0 0 100 100">
                    <path d="M20,40 Q50,10 80,40 L75,55 L25,55 Z" fill="#D32F2F" />
                    <circle cx="80" cy="40" r="8" fill="#FFF" /> <rect x="20" y="50" width="60" height="10" rx="5" fill="#FFF" /> <circle cx="50" cy="65" r="20" fill="#FFCCBC" />
                    <circle cx="43" cy="62" r="2" fill="#333" />
                    <circle cx="57" cy="62" r="2" fill="#333" />
                    <circle cx="41" cy="66" r="3" fill="#ffab91" opacity="0.5" /> <circle cx="59" cy="66" r="3" fill="#ffab91" opacity="0.5" />
                    <path d="M30,70 Q50,95 70,70 Q75,75 70,85 Q50,100 30,85 Q25,75 30,70" fill="#FFF" />
                    <circle cx="50" cy="68" r="3" fill="#EF9A9A" />
                </svg>
            </div>

            <div class="character gift-svg" onclick="openModal('ğŸ', 'æ‰€æœ‰çš„å¥½è¿éƒ½æ‰“åŒ…ç»™ä½ ï¼<br>ç¥æˆ‘ä»¬é¡ºé¡ºåˆ©åˆ©ï¼Œå¹³å¹³å®‰å®‰ï¼')">
                <svg width="90" height="90" viewBox="0 0 100 100">
                    <ellipse cx="50" cy="85" rx="35" ry="8" fill="rgba(0,0,0,0.3)" />
                    <rect x="20" y="40" width="60" height="45" rx="3" fill="#C0392B" />
                    <rect x="15" y="35" width="70" height="15" rx="2" fill="#E74C3C" />
                    <rect x="45" y="40" width="10" height="45" fill="#F1C40F" />
                    <rect x="45" y="35" width="10" height="15" fill="#F39C12" />
                    <circle cx="40" cy="35" r="8" fill="#F1C40F" />
                    <circle cx="60" cy="35" r="8" fill="#F1C40F" />
                    <circle cx="50" cy="35" r="5" fill="#F39C12" />
                </svg>
            </div>
        </div>

        <div class="title-text">Merry Christmas</div>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="letter-card">
            <h3 id="modalTitle">æ ‡é¢˜</h3>
            <p id="modalContent">å†…å®¹</p>
            <button class="close-btn" onclick="closeModal()">æ”¶åˆ°ç¥ç¦ â¤ï¸</button>
        </div>
    </div>

    <script>
        // --- 1. éŸ³ä¹æ§åˆ¶é€»è¾‘ ---
        const bgm = document.getElementById('bgm');
        const musicBtn = document.querySelector('.music-btn');
        const musicIcon = document.getElementById('music-icon');
        const musicText = document.getElementById('music-text');
        let isPlaying = false;

        function toggleMusic() {
            if (isPlaying) {
                bgm.pause();
                musicText.innerText = "æ’­æ”¾åœ£è¯æ­Œ";
                musicIcon.classList.remove('music-spin');
                musicBtn.style.background = "rgba(255, 255, 255, 0.15)";
            } else {
                bgm.play().then(() => {
                    musicText.innerText = "æ­£åœ¨æ’­æ”¾...";
                    musicIcon.classList.add('music-spin');
                    musicBtn.style.background = "rgba(46, 204, 113, 0.6)";
                }).catch(e => alert("è¯·ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®åå†ç‚¹å‡»æ’­æ”¾æŒ‰é’®"));
            }
            isPlaying = !isPlaying;
        }

        // --- 2. å¼¹çª—é€»è¾‘ ---
        const modal = document.getElementById('modalOverlay');
        const mTitle = document.getElementById('modalTitle');
        const mContent = document.getElementById('modalContent');

        function openModal(title, content) {
            mTitle.innerHTML = title;
            mContent.innerHTML = content;
            modal.style.display = 'flex';
            // å»¶æ—¶æ·»åŠ activeç±»ä»¥è§¦å‘CSSåŠ¨ç”»
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeModal() {
            modal.classList.remove('active');
            setTimeout(() => modal.style.display = 'none', 300);
        }

        // --- 3. é›ªèŠ±ç‰¹æ•ˆé€»è¾‘ ---
        const canvas = document.getElementById('snow-canvas');
        const ctx = canvas.getContext('2d');
        let w = canvas.width = window.innerWidth;
        let h = canvas.height = window.innerHeight;

        const count = 150; // é›ªèŠ±æ•°é‡
        const snowflakes = [];

        class Snowflake {
            constructor() {
                this.init();
            }
            init() {
                this.x = Math.random() * w;
                this.y = Math.random() * -h; // ä»å±å¹•ä¸Šæ–¹å¼€å§‹
                this.size = Math.random() * 3 + 0.5;
                this.speedY = Math.random() * 1.5 + 0.5;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.opacity = Math.random() * 0.5 + 0.3;
            }
            update() {
                this.y += this.speedY;
                this.x += this.speedX;
                if (this.y > h) {
                    this.init(); // åˆ°åº•éƒ¨é‡ç½®
                }
            }
            draw() {
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        for (let i = 0; i < count; i++) snowflakes.push(new Snowflake());

        function animate() {
            ctx.clearRect(0, 0, w, h);
            snowflakes.forEach(flake => {
                flake.update();
                flake.draw();
            });
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize', () => {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>